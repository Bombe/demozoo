{% extends "base.html" %}
{% load demoscene_tags %}
{% load url from future %}

{% block html_title %}Discussions - Demozoo{% endblock %}

{% block legacy_css %}{% endblock %}

{% block extra_css %}
	<link rel="stylesheet" href="/static/forums/css/pages/index.less" type="text/less" />
{% endblock %}

{% block body_class %}forums_index{% endblock %}

{% block base_main %}
	{% if site_is_writeable %}
		<ul class="actions">
			<li><a href="{% url 'forums_new_topic' %}" class="action_button icon add open_in_lightbox">New topic</a></li>
		</ul>
	{% endif %}

	<div class="focus_title">
		<h2>Discussions</h2>
	</div>
	
	<ul class="topics">
		{% for topic in topics %}
			<li class="{% cycle 'odd' 'even' %}">
				<a href="{{ topic.get_absolute_url }}">
					<div class="title">{{ topic.title }}</div>
					<div class="meta">
						Started at {{ topic.created_at|date:"H:i j F Y" }} by {{ topic.created_by_user.username }}.
						{% if topic.reply_count %}
							{{ topic.reply_count }} repl{{ topic.reply_count|pluralize:"y,ies" }} - last reply on {{ topic.last_post_at|date:"H:i j F Y" }} by {{ topic.last_post_by_user.username }}
						{% endif %}
					</div>
				</a>
			</li>
		{% endfor %}
	</ul>
{% endblock %}
